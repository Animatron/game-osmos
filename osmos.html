<!DOCTYPE html>
<html>
	<head>
		<title>Bejeweled - Animatron HTML5 Player Demo</title>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<script src="../player/vendor/matrix.js" type="text/javascript"></script>
		<script src="../player/anm.player.js" type="text/javascript"></script>
		<script src="../player/anm.builder.js" type="text/javascript"></script>
		<script src="../player/animatron_import.js" type="text/javascript"></script>

		<script type="text/javascript">
			var b = Builder._$, B = Builder, C = anm.C;
			
			// canvas1
            var scene1 = b();
			
			function toHex(n) {
				return ((n < 16) ? '0' : '') + n.toString(16);
			}
			
			function hsvToHex(h, s, v) {
				var r, g, b;

   				var i = Math.floor(h * 6);
    			var f = h * 6 - i;
    			var p = v * (1 - s);
    			var q = v * (1 - f * s);
    			var t = v * (1 - (1 - f) * s);

    			switch(i % 6){
        			case 0: r = v, g = t, b = p; break;
        			case 1: r = q, g = v, b = p; break;
        			case 2: r = p, g = v, b = t; break;
        			case 3: r = p, g = q, b = v; break;
        			case 4: r = t, g = p, b = v; break;
        			case 5: r = v, g = p, b = q; break;
    			}
				
				return '#' + toHex(Math.floor(r*255)) + toHex(Math.floor(g*255)) + toHex(Math.floor(b*255));
			}
			
			function make(h) {
				return b().paint(function(ctx) {
					ctx.beginPath();
					ctx.arc(20, 20, 10, 0, 2*Math.PI, false);
					ctx.fillStyle = hsvToHex(h, 1, .7);
        			ctx.fill();
					ctx.closePath();
					ctx.beginPath();
					ctx.arc(19, 19, 7.5, 0, 2*Math.PI, false);
					ctx.fillStyle = hsvToHex(h, 1, .8);
        			ctx.fill();
					ctx.closePath();
					ctx.beginPath();
					ctx.arc(18, 18, 5, 0, 2*Math.PI, false);
					ctx.fillStyle = hsvToHex(h, 1, .9);
        			ctx.fill();
					ctx.closePath();
					ctx.beginPath();
					ctx.arc(17, 17, 2.5, 0, 2*Math.PI, false);
					ctx.fillStyle = hsvToHex(h, 1, 1);
        			ctx.fill();
					ctx.closePath();
				});
			}
			
            function start() {
				//console.log(hsvToHex(119/360, 1, 1));
				
				var dot = make(119/360);
				scene1.add(dot);
				
                createPlayer('canvas1', {'mode': C.M_DYNAMIC}).load(scene1).play();
    
            }
        </script>
      </head>

	<body onload="start();">
		<h1>Osmos - Animatron HTML5 Player Demo</h1>

		<!-- canvas1 -->
		<canvas id="canvas1"></canvas>

	</body>

</html>